{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nvar initialState = {\n  loading: false,\n  error: undefined,\n  pageCount: 0,\n  currentPage: 0,\n  data: undefined,\n  details: {}\n};\nexport default createSlice({\n  name: \"pokemonPage\",\n  initialState,\n  reducers: {\n    fetchPage: function fetchPage(state, action) {\n      state.loading = true;\n      state.data = undefined;\n      state.error = undefined;\n      state.details = {};\n    },\n    pageFetched: function pageFetched(state, action) {\n      state.loading = false;\n      state.data = action.payload.page;\n      state.pageCount = Math.ceil(action.payload.page.count / action.payload.size);\n      state.currentPage = state.pageCount - Math.ceil((action.payload.page.count - action.payload.offset) / action.payload.size) + 1;\n    },\n    setError: function setError(state, action) {\n      state.error = action.payload;\n    },\n    fetchDetails: function fetchDetails(state, action) {\n      state.details[action.payload] = {\n        loading: true,\n        error: undefined,\n        data: undefined\n      };\n    },\n    setDetailsError: function setDetailsError(state, action) {\n      state.details[action.payload.pokemonName] = {\n        loading: false,\n        error: action.payload.error,\n        data: undefined\n      };\n    },\n    detailsFetched: function detailsFetched(state, action) {\n      state.details[action.payload.pokemonName] = {\n        loading: false,\n        error: undefined,\n        data: action.payload.data\n      };\n    }\n  }\n});","map":{"version":3,"sources":["/home/dcestari/Documents/projects/react/react-pokeapi/src/redux/pokemonPage/slice.ts"],"names":["createSlice","initialState","loading","error","undefined","pageCount","currentPage","data","details","name","reducers","fetchPage","state","action","pageFetched","payload","page","Math","ceil","count","size","offset","setError","fetchDetails","setDetailsError","pokemonName","detailsFetched"],"mappings":"AAAA,SAASA,WAAT,QAA2C,kBAA3C;AAUA,IAAMC,YAA0B,GAAG;AACjCC,EAAAA,OAAO,EAAE,KADwB;AAEjCC,EAAAA,KAAK,EAAEC,SAF0B;AAGjCC,EAAAA,SAAS,EAAE,CAHsB;AAIjCC,EAAAA,WAAW,EAAE,CAJoB;AAKjCC,EAAAA,IAAI,EAAEH,SAL2B;AAMjCI,EAAAA,OAAO,EAAE;AANwB,CAAnC;AASA,eAAeR,WAAW,CAAC;AACzBS,EAAAA,IAAI,EAAE,aADmB;AAEzBR,EAAAA,YAFyB;AAGzBS,EAAAA,QAAQ,EAAE;AACRC,IAAAA,SAAS,EAAE,mBACTC,KADS,EAETC,MAFS,EAGN;AACHD,MAAAA,KAAK,CAACV,OAAN,GAAgB,IAAhB;AACAU,MAAAA,KAAK,CAACL,IAAN,GAAaH,SAAb;AACAQ,MAAAA,KAAK,CAACT,KAAN,GAAcC,SAAd;AACAQ,MAAAA,KAAK,CAACJ,OAAN,GAAgB,EAAhB;AACD,KATO;AAURM,IAAAA,WAAW,EAAE,qBACXF,KADW,EAEXC,MAFW,EAOR;AACHD,MAAAA,KAAK,CAACV,OAAN,GAAgB,KAAhB;AACAU,MAAAA,KAAK,CAACL,IAAN,GAAaM,MAAM,CAACE,OAAP,CAAeC,IAA5B;AACAJ,MAAAA,KAAK,CAACP,SAAN,GAAkBY,IAAI,CAACC,IAAL,CAAUL,MAAM,CAACE,OAAP,CAAeC,IAAf,CAAoBG,KAApB,GAA4BN,MAAM,CAACE,OAAP,CAAeK,IAArD,CAAlB;AACAR,MAAAA,KAAK,CAACN,WAAN,GACEM,KAAK,CAACP,SAAN,GACAY,IAAI,CAACC,IAAL,CACE,CAACL,MAAM,CAACE,OAAP,CAAeC,IAAf,CAAoBG,KAApB,GAA4BN,MAAM,CAACE,OAAP,CAAeM,MAA5C,IAAsDR,MAAM,CAACE,OAAP,CAAeK,IADvE,CADA,GAIA,CALF;AAMD,KA3BO;AA4BRE,IAAAA,QAAQ,EAAE,kBAACV,KAAD,EAAQC,MAAR,EAA0C;AAClDD,MAAAA,KAAK,CAACT,KAAN,GAAcU,MAAM,CAACE,OAArB;AACD,KA9BO;AA+BRQ,IAAAA,YAAY,EAAE,sBAACX,KAAD,EAAQC,MAAR,EAA0C;AACtDD,MAAAA,KAAK,CAACJ,OAAN,CAAcK,MAAM,CAACE,OAArB,IAAgC;AAC9Bb,QAAAA,OAAO,EAAE,IADqB;AAE9BC,QAAAA,KAAK,EAAEC,SAFuB;AAG9BG,QAAAA,IAAI,EAAEH;AAHwB,OAAhC;AAKD,KArCO;AAsCRoB,IAAAA,eAAe,EAAE,yBACfZ,KADe,EAEfC,MAFe,EAGZ;AACHD,MAAAA,KAAK,CAACJ,OAAN,CAAcK,MAAM,CAACE,OAAP,CAAeU,WAA7B,IAA4C;AAC1CvB,QAAAA,OAAO,EAAE,KADiC;AAE1CC,QAAAA,KAAK,EAAEU,MAAM,CAACE,OAAP,CAAeZ,KAFoB;AAG1CI,QAAAA,IAAI,EAAEH;AAHoC,OAA5C;AAKD,KA/CO;AAgDRsB,IAAAA,cAAc,EAAE,wBACdd,KADc,EAEdC,MAFc,EAGX;AACHD,MAAAA,KAAK,CAACJ,OAAN,CAAcK,MAAM,CAACE,OAAP,CAAeU,WAA7B,IAA4C;AAC1CvB,QAAAA,OAAO,EAAE,KADiC;AAE1CC,QAAAA,KAAK,EAAEC,SAFmC;AAG1CG,QAAAA,IAAI,EAAEM,MAAM,CAACE,OAAP,CAAeR;AAHqB,OAA5C;AAKD;AAzDO;AAHe,CAAD,CAA1B","sourcesContent":["import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { INamedApiResourceList, IPokemon } from \"pokeapi-typescript\";\nimport { LoadableResource } from \"../types\";\n\nexport type InitialState = LoadableResource<INamedApiResourceList<IPokemon>> & {\n  pageCount: number;\n  currentPage: number;\n  details: { [key: string]: LoadableResource<IPokemon> | undefined };\n};\n\nconst initialState: InitialState = {\n  loading: false,\n  error: undefined as string | undefined,\n  pageCount: 0,\n  currentPage: 0,\n  data: undefined,\n  details: {},\n};\n\nexport default createSlice({\n  name: \"pokemonPage\",\n  initialState,\n  reducers: {\n    fetchPage: (\n      state,\n      action: PayloadAction<{ size: number; offset: number } | { url: string }>\n    ) => {\n      state.loading = true;\n      state.data = undefined;\n      state.error = undefined;\n      state.details = {};\n    },\n    pageFetched: (\n      state,\n      action: PayloadAction<{\n        page: INamedApiResourceList<IPokemon>;\n        size: number;\n        offset: number;\n      }>\n    ) => {\n      state.loading = false;\n      state.data = action.payload.page;\n      state.pageCount = Math.ceil(action.payload.page.count / action.payload.size);\n      state.currentPage =\n        state.pageCount -\n        Math.ceil(\n          (action.payload.page.count - action.payload.offset) / action.payload.size\n        ) +\n        1;\n    },\n    setError: (state, action: PayloadAction<string>) => {\n      state.error = action.payload;\n    },\n    fetchDetails: (state, action: PayloadAction<string>) => {\n      state.details[action.payload] = {\n        loading: true,\n        error: undefined,\n        data: undefined,\n      };\n    },\n    setDetailsError: (\n      state,\n      action: PayloadAction<{ pokemonName: string; error: string }>\n    ) => {\n      state.details[action.payload.pokemonName] = {\n        loading: false,\n        error: action.payload.error,\n        data: undefined,\n      };\n    },\n    detailsFetched: (\n      state,\n      action: PayloadAction<{ pokemonName: string; data: IPokemon }>\n    ) => {\n      state.details[action.payload.pokemonName] = {\n        loading: false,\n        error: undefined,\n        data: action.payload.data,\n      };\n    },\n  },\n});\n"]},"metadata":{},"sourceType":"module"}